!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("final-form")):"function"==typeof define&&define.amd?define(["exports","react","final-form"],t):t((e=e||self)["react-final-form"]={},e.React,e.FinalForm)}(this,function(e,j,F){"use strict";var E="default"in j?j.default:j;function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function J(e,t){if(null==e)return{};var n,r,i={},u=Object.keys(e);for(r=0;r<u.length;r++)n=u[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}function V(e,t){var n=e.render,r=e.children,i=e.component,u=J(e,["render","children","component"]);if(i)return j.createElement(i,z({},u,{children:r,render:n}));if(n)return n(void 0===r?u:z({},u,{children:r}));if("function"!=typeof r)throw new Error("Must specify either a render prop, a render function as children, or a component prop to "+t);return r(u)}function w(e,t,n){void 0===n&&(n=function(e,t){return e===t});var r=E.useRef(e);E.useEffect(function(){n(e,r.current)||(t(),r.current=e)})}var C=function(e,t){return e===t||(e&&t?JSON.stringify(e)===JSON.stringify(t):e===t)},k=function(e){return!(!e||"function"!=typeof e.stopPropagation)},x=j.createContext();function _(e){var t=E.useRef(e);return E.useEffect(function(){t.current=e}),t}var t="6.3.0",R={"final-form":F.version,"react-final-form":t},q=F.formSubscriptionItems.reduce(function(e,t){return e[t]=!0,e},{});function n(e){var t=e.debug,n=e.decorators,r=e.destroyOnUnregister,i=e.form,u=e.initialValues,a=e.initialValuesEqual,o=e.keepDirtyOnReinitialize,l=e.mutators,c=e.onSubmit,f=e.subscription,s=void 0===f?q:f,d=e.validate,v=e.validateOnBlur,m=J(e,["debug","decorators","destroyOnUnregister","form","initialValues","initialValuesEqual","keepDirtyOnReinitialize","mutators","onSubmit","subscription","validate","validateOnBlur"]),p={debug:t,destroyOnUnregister:r,initialValues:u,keepDirtyOnReinitialize:o,mutators:l,onSubmit:c,validate:d,validateOnBlur:v},b=function(e){var t=E.useRef();return t.current||(t.current=e()),t.current}(function(){var e=i||F.createForm(p);return e.pauseValidation(),e}),g=j.useState(function(){var t={};return b.subscribe(function(e){t=e},s)(),t}),y=g[0],h=g[1],S=_(y);j.useEffect(function(){b.isValidationPaused()&&b.resumeValidation();var e=[b.subscribe(function(e){C(e,S.current)||h(e)},s)].concat(n?n.map(function(e){return e(b)}):[]);return function(){e.forEach(function(e){return e()})}},[n]),w(t,function(){b.setConfig("debug",t)}),w(r,function(){b.destroyOnUnregister=!!r}),w(u,function(){b.setConfig("initialValues",u)},a||C),w(o,function(){b.setConfig("keepDirtyOnReinitialize",o)}),w(l,function(){b.setConfig("mutators",l)}),w(c,function(){b.setConfig("onSubmit",c)}),w(d,function(){b.setConfig("validate",d)}),w(v,function(){b.setConfig("validateOnBlur",v)});var O=z({},y,{form:z({},b,{reset:function(e){k(e)?b.reset():b.reset(e)}}),handleSubmit:function(e){return e&&("function"==typeof e.preventDefault&&e.preventDefault(),"function"==typeof e.stopPropagation&&e.stopPropagation()),b.submit()}});return j.createElement(x.Provider,{value:b},V(z({},m,O,{__versions:R}),"ReactFinalForm"))}function I(e){var t=j.useContext(x);if(!t)throw new Error((e||"useForm")+" must be used inside of a <Form> component");return t}function a(e){var t=void 0===e?{}:e,n=t.onChange,r=t.subscription,i=void 0===r?q:r,u=I("useFormState"),a=j.useRef(!0),o=j.useState(function(){var t={};return u.subscribe(function(e){t=e},i)(),n&&n(t),t}),l=o[0],c=o[1];return j.useEffect(function(){return u.subscribe(function(e){a.current?a.current=!1:(c(e),n&&n(e))},i)},[]),l}function r(e){var t=e.onChange,n=e.subscription,r=J(e,["onChange","subscription"]),i=I("FormSpy"),u=a({onChange:t,subscription:n});return t?null:V(z({},r,u,{form:z({},i,{reset:function(e){k(e)?i.reset():i.reset(e)}})}),"FormSpy")}var L="undefined"!=typeof window&&window.navigator&&window.navigator.product&&"ReactNative"===window.navigator.product;function M(e){var t=j.useRef();return j.useEffect(function(){t.current=e}),t.current}function T(e,t){return(e?JSON.stringify(e):null)!==(t?JSON.stringify(t):null)}function G(e,t){return void 0===e?"":e}function H(e,t){return""===e?void 0:e}var K=F.fieldSubscriptionItems.reduce(function(e,t){return e[t]=!0,e},{});function O(n,e){function r(e){return E.registerField(n,e,y,{afterSubmit:i,beforeSubmit:function(){return w.current()},defaultValue:l,getValidator:function(){return V.current},initialValue:d,isEqual:v,validateFields:O})}var t=void 0===e?{}:e,i=t.afterSubmit,u=t.allowNull,a=t.beforeSubmit,o=t.component,l=t.defaultValue,c=t.format,f=void 0===c?G:c,s=t.formatOnBlur,d=t.initialValue,v=t.isEqual,m=t.multiple,p=t.parse,b=void 0===p?H:p,g=t.subscription,y=void 0===g?K:g,h=t.type,S=t.validate,O=t.validateFields,F=t.value,E=I("useField"),V=_(S),w=_(function(){if(s){var e=f(x.value,x.name);e!==x.value&&x.change(e)}return a&&a()}),C=j.useRef(!0),k=j.useState(function(){var t={},e=E.destroyOnUnregister;return E.destroyOnUnregister=!1,r(function(e){t=e})(),E.destroyOnUnregister=e,t}),x=k[0],R=k[1];j.useEffect(function(){return r(function(e){C.current?C.current=!1:R(e)})},[n,l,d,v]);var q=M(x.value),B=M(F),N={onBlur:j.useCallback(function(e){if(x.blur(),s){var t=E.getFieldState(x.name);x.change(f(t?t.value:x.value,x.name))}},[x.name,T(q,x.value),f,s]),onChange:j.useCallback(function(e){var t=e&&e.target?function(e,t,n,r){if(!r&&e.nativeEvent&&void 0!==e.nativeEvent.text)return e.nativeEvent.text;if(r&&e.nativeEvent)return e.nativeEvent.text;var i=e.target,u=i.type,a=i.value,o=i.checked;switch(u){case"checkbox":if(void 0===n)return!!o;if(o)return Array.isArray(t)?t.concat(n):[n];if(!Array.isArray(t))return t;var l=t.indexOf(n);return l<0?t:t.slice(0,l).concat(t.slice(l+1));case"select-multiple":return function(e){var t=[];if(e)for(var n=0;n<e.length;n++){var r=e[n];r.selected&&t.push(r.value)}return t}(e.target.options);default:return a}}(e,x.value,F,L):e;x.change(b(t,n))},[T(B,F),n,b,x.change,T(q,x.value),h]),onFocus:j.useCallback(function(e){x.focus()},[])},P=(x.blur,x.change,x.focus,x.value),U=(x.name,J(x,["blur","change","focus","value","name"])),A={active:U.active,data:U.data,dirty:U.dirty,dirtySinceLastSubmit:U.dirtySinceLastSubmit,error:U.error,initial:U.initial,invalid:U.invalid,length:U.length,modified:U.modified,pristine:U.pristine,submitError:U.submitError,submitFailed:U.submitFailed,submitSucceeded:U.submitSucceeded,submitting:U.submitting,touched:U.touched,valid:U.valid,validating:U.validating,visited:U.visited};s?"input"===o&&(P=G(P)):P=f(P,n),null!==P||u||(P="");var D=z({name:n,value:P,type:h},N);return"checkbox"===h?void 0===F?D.checked=!!P:(D.checked=!(!Array.isArray(P)||!~P.indexOf(F)),D.value=F):"radio"===h?(D.checked=P===F,D.value=F):"select"===o&&m&&(D.value=D.value||[],D.multiple=!0),{input:D,meta:A}}e.Field=function(e){var t=e.afterSubmit,n=e.allowNull,r=e.beforeSubmit,i=e.children,u=e.component,a=e.defaultValue,o=e.format,l=e.formatOnBlur,c=e.initialValue,f=e.isEqual,s=e.multiple,d=e.name,v=e.parse,m=e.subscription,p=e.type,b=e.validate,g=e.validateFields,y=e.value,h=J(e,["afterSubmit","allowNull","beforeSubmit","children","component","defaultValue","format","formatOnBlur","initialValue","isEqual","multiple","name","parse","subscription","type","validate","validateFields","value"]),S=O(d,{afterSubmit:t,allowNull:n,beforeSubmit:r,children:i,component:u,defaultValue:a,format:o,formatOnBlur:l,initialValue:c,isEqual:f,multiple:s,parse:v,subscription:m,type:p,validate:b,validateFields:g,value:y});return"function"==typeof i?i(z({},S,h)):"string"==typeof u?j.createElement(u,z({},S.input,{children:i},h)):V(z({},S,{children:i,component:u},h),"Field("+d+")")},e.Form=n,e.FormSpy=r,e.useField=O,e.useForm=I,e.useFormState=a,e.version=t,e.withTypes=function(){return{Form:n,FormSpy:r}},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=react-final-form.umd.min.js.map
