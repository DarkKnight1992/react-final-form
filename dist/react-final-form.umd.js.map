{"version":3,"file":"react-final-form.umd.js","sources":["../node_modules/@babel/runtime/helpers/esm/extends.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../src/renderComponent.js","../src/useWhenValueChanges.js","../src/useConstant.js","../src/shallowEqual.js","../src/isSyntheticEvent.js","../src/context.js","../src/useLatest.js","../src/ReactFinalForm.js","../src/useForm.js","../src/useFormState.js","../src/FormSpy.js","../src/isReactNative.js","../src/getValue.js","../src/useField.js","../src/Field.js","../src/index.js"],"sourcesContent":["export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","// @flow\nimport * as React from 'react'\nimport type { RenderableProps } from './types'\n\n// shared logic between components that use either render prop,\n// children render function, or component prop\nexport default function renderComponent<T>(\n  props: RenderableProps<T> & T,\n  name: string\n): React.Node {\n  const { render, children, component, ...rest } = props\n  if (component) {\n    return React.createElement(component, { ...rest, children, render })\n  }\n  if (render) {\n    return render(children === undefined ? rest : { ...rest, children }) // inject children back in\n  }\n  if (typeof children !== 'function') {\n    throw new Error(\n      `Must specify either a render prop, a render function as children, or a component prop to ${name}`\n    )\n  }\n  return children(rest)\n}\n","// @flow\nimport React from 'react'\n\nexport default function useWhenValueChanges(\n  value: any,\n  callback: () => void,\n  isEqual: (any, any) => boolean = (a, b) => a === b\n) {\n  const previous = React.useRef(value)\n  React.useEffect(() => {\n    if (!isEqual(value, previous.current)) {\n      callback()\n      previous.current = value\n    }\n  })\n}\n","// @flow\nimport React from 'react'\n\n/**\n * A simple hook to create a constant value that lives for\n * the lifetime of the component.\n *\n * Plagiarized from https://github.com/Andarist/use-constant\n *\n * Do NOT reuse this code unless you know what you're doing.\n * Use Andarist's hook; it's more fault tolerant to things like\n * falsy values.\n *\n * @param {Function} init - A function to generate the value\n */\nexport default function useConstant<T>(init: () => T): T {\n  const ref = React.useRef<?T>()\n  if (!ref.current) {\n    ref.current = init()\n  }\n  return ref.current\n}\n","// @flow\nconst shallowEqual = (a: any, b: any): boolean => {\n  if (a === b) {\n    return true\n  }\n  // if (typeof a !== 'object' || !a || typeof b !== 'object' || !b) {\n  //   return false\n  // }\n  // var keysA = Object.keys(a)\n  // var keysB = Object.keys(b)\n  // if (keysA.length !== keysB.length) {\n  //   return false\n  // }\n  // var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(b)\n  // for (var idx = 0; idx < keysA.length; idx++) {\n  //   var key = keysA[idx]\n  //   if (!bHasOwnProperty(key) || a[key] !== b[key]) {\n  //     return false\n  //   }\n  // }\n  \n\n  return a && b ? JSON.stringify(a) === JSON.stringify(b) : a === b;\n}\n\nexport default shallowEqual\n","// @flow\nconst isSyntheticEvent = (candidate: any): boolean =>\n  !!(candidate && typeof candidate.stopPropagation === 'function')\n\nexport default isSyntheticEvent\n","// @flow\nimport * as React from 'react'\nimport type { FormApi } from 'final-form'\n\nexport default React.createContext<?FormApi<any>>()\n","// @flow\nimport React from 'react'\n\nexport default function useLatest<T>(value: T): { +current: T } {\n  const ref = React.useRef(value)\n\n  React.useEffect(() => {\n    ref.current = value\n  })\n\n  return ref\n}\n","// @flow\nimport * as React from 'react'\nimport {\n  createForm,\n  formSubscriptionItems,\n  version as ffVersion\n} from 'final-form'\nimport type {\n  FormApi,\n  Config,\n  FormSubscription,\n  FormState,\n  FormValuesShape,\n  Unsubscribe\n} from 'final-form'\nimport type { FormProps as Props } from './types'\nimport renderComponent from './renderComponent'\nimport useWhenValueChanges from './useWhenValueChanges'\nimport useConstant from './useConstant'\nimport shallowEqual from './shallowEqual';\n// import { isEqual as isFormEqual } from \"lodash\";\nimport isSyntheticEvent from './isSyntheticEvent'\nimport type { FormRenderProps } from './types.js.flow'\nimport ReactFinalFormContext from './context'\nimport useLatest from './useLatest'\nimport { version } from '../package.json'\n\nexport { version }\n\n\nconst versions = {\n  'final-form': ffVersion,\n  'react-final-form': version\n}\n\nexport const all: FormSubscription = formSubscriptionItems.reduce(\n  (result, key) => {\n    result[key] = true\n    return result\n  },\n  {}\n)\n\nfunction ReactFinalForm<FormValues: FormValuesShape>({\n  debug,\n  decorators,\n  destroyOnUnregister,\n  form: alternateFormApi,\n  initialValues,\n  initialValuesEqual,\n  keepDirtyOnReinitialize,\n  mutators,\n  onSubmit,\n  subscription = all,\n  validate,\n  validateOnBlur,\n  ...rest\n}: Props<FormValues>) {\n\n  const config: Config<FormValues> = {\n    debug,\n    destroyOnUnregister,\n    initialValues,\n    keepDirtyOnReinitialize,\n    mutators,\n    onSubmit,\n    validate,\n    validateOnBlur\n  }\n\n  const form: FormApi<FormValues> = useConstant(() => {\n    const f = alternateFormApi || createForm<FormValues>(config)\n    f.pauseValidation()\n    return f\n  })\n\n  // synchronously register and unregister to query form state for our subscription on first render\n  const [state, setState] = React.useState<FormState<FormValues>>(\n    (): FormState<FormValues> => {\n      let initialState: FormState<FormValues> = {}\n      form.subscribe(state => {\n        initialState = state\n      }, subscription)()\n      return initialState\n    }\n  )\n\n  // save a copy of state that can break through the closure\n  const stateRef = useLatest<FormState<FormValues>>(state)\n\n  React.useEffect(() => {\n    // We have rendered, so all fields are no registered, so we can unpause validation\n    form.isValidationPaused() && form.resumeValidation()\n    const unsubscriptions: Unsubscribe[] = [\n      form.subscribe(s => {\n        if (!shallowEqual(s, stateRef.current)) {\n          setState(s)\n        }\n      }, subscription),\n      ...(decorators\n        ? decorators.map(decorator =>\n            // this noop ternary is to appease the flow gods\n            // istanbul ignore next\n            decorator(form)\n          )\n        : [])\n    ]\n\n    return () => {\n      unsubscriptions.forEach(unsubscribe => unsubscribe())\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [decorators])\n\n  // warn about decorator changes\n  // istanbul ignore next\n  if (process.env.NODE_ENV !== 'production') {\n    // You're never supposed to use hooks inside a conditional, but in this\n    // case we can be certain that you're not going to be changing your\n    // NODE_ENV between renders, so this is safe.\n\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useWhenValueChanges(\n      decorators,\n      () => {\n        console.error(\n          'Form decorators should not change from one render to the next as new values will be ignored'\n        )\n      },\n      shallowEqual\n    )\n  }\n\n  // allow updatable config\n  useWhenValueChanges(debug, () => {\n    form.setConfig('debug', debug)\n  })\n  useWhenValueChanges(destroyOnUnregister, () => {\n    form.destroyOnUnregister = !!destroyOnUnregister\n  })\n  useWhenValueChanges(\n    initialValues,\n    () => {\n      form.setConfig('initialValues', initialValues)\n    },\n    initialValuesEqual || shallowEqual\n  )\n  useWhenValueChanges(keepDirtyOnReinitialize, () => {\n    form.setConfig('keepDirtyOnReinitialize', keepDirtyOnReinitialize)\n  })\n  useWhenValueChanges(mutators, () => {\n    form.setConfig('mutators', mutators)\n  })\n  useWhenValueChanges(onSubmit, () => {\n    form.setConfig('onSubmit', onSubmit)\n  })\n  useWhenValueChanges(validate, () => {\n    form.setConfig('validate', validate)\n  })\n  useWhenValueChanges(validateOnBlur, () => {\n    form.setConfig('validateOnBlur', validateOnBlur)\n  })\n\n  const handleSubmit = (event: ?SyntheticEvent<HTMLFormElement>) => {\n    if (event) {\n      // sometimes not true, e.g. React Native\n      if (typeof event.preventDefault === 'function') {\n        event.preventDefault()\n      }\n      if (typeof event.stopPropagation === 'function') {\n        // prevent any outer forms from receiving the event too\n        event.stopPropagation()\n      }\n    }\n    return form.submit()\n  }\n\n  const renderProps: FormRenderProps<FormValues> = {\n    // assign to force Flow check\n    ...state,\n    form: {\n      ...form,\n      reset: eventOrValues => {\n        if (isSyntheticEvent(eventOrValues)) {\n          // it's a React SyntheticEvent, call reset with no arguments\n          form.reset()\n        } else {\n          form.reset(eventOrValues)\n        }\n      }\n    },\n    handleSubmit\n  }\n  return React.createElement(\n    ReactFinalFormContext.Provider,\n    { value: form },\n    renderComponent(\n      {\n        ...rest,\n        ...renderProps,\n        __versions: versions\n      },\n      'ReactFinalForm'\n    )\n  )\n}\n\nexport default ReactFinalForm\n","// @flow\nimport * as React from 'react'\nimport type { FormApi, FormValuesShape } from 'final-form'\nimport ReactFinalFormContext from './context'\n\nfunction useForm<FormValues: FormValuesShape>(\n  componentName?: string\n): FormApi<FormValues> {\n  const form: ?FormApi<FormValues> = React.useContext(ReactFinalFormContext)\n  if (!form) {\n    throw new Error(\n      `${componentName || 'useForm'} must be used inside of a <Form> component`\n    )\n  }\n  return form\n}\n\nexport default useForm\n","// @flow\nimport * as React from 'react'\nimport type { UseFormStateParams } from './types'\nimport type { FormState, FormApi, FormValuesShape } from 'final-form'\nimport { all } from './ReactFinalForm'\nimport useForm from './useForm'\n\nfunction useFormState<FormValues: FormValuesShape>({\n  onChange,\n  subscription = all\n}: UseFormStateParams<FormValues> = {}): FormState<FormValues> {\n  const form: FormApi<FormValues> = useForm<FormValues>('useFormState')\n  const firstRender = React.useRef(true)\n\n  // synchronously register and unregister to query field state for our subscription on first render\n  const [state, setState] = React.useState<FormState<FormValues>>(\n    (): FormState<FormValues> => {\n      let initialState: FormState<FormValues> = {}\n      form.subscribe(state => {\n        initialState = state\n      }, subscription)()\n      if (onChange) {\n        onChange(initialState)\n      }\n      return initialState\n    }\n  )\n\n  React.useEffect(\n    () =>\n      form.subscribe(newState => {\n        if (firstRender.current) {\n          firstRender.current = false\n        } else {\n          setState(newState)\n          if (onChange) {\n            onChange(newState)\n          }\n        }\n      }, subscription),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  )\n  return state\n}\n\nexport default useFormState\n","// @flow\nimport renderComponent from './renderComponent'\nimport type { FormSpyPropsWithForm as Props, FormSpyRenderProps } from './types'\nimport type { FormValuesShape } from 'final-form'\nimport isSyntheticEvent from './isSyntheticEvent'\nimport useForm from './useForm'\nimport useFormState from './useFormState'\n\nfunction FormSpy<FormValues: FormValuesShape>({\n  onChange,\n  subscription,\n  ...rest\n}: Props<FormValues>) {\n  const reactFinalForm = useForm<FormValues>('FormSpy')\n  const state = useFormState({ onChange, subscription })\n  if (onChange) {\n    return null\n  }\n\n  const renderProps: FormSpyRenderProps<FormValues> = {\n    form: {\n      ...reactFinalForm,\n      reset: eventOrValues => {\n        if (isSyntheticEvent(eventOrValues)) {\n          // it's a React SyntheticEvent, call reset with no arguments\n          reactFinalForm.reset()\n        } else {\n          reactFinalForm.reset(eventOrValues)\n        }\n      }\n    }\n  }\n  return renderComponent(\n    {\n      ...rest,\n      ...state,\n      ...renderProps\n    },\n    'FormSpy'\n  )\n}\n\nexport default FormSpy\n","// @flow\nconst isReactNative =\n  typeof window !== 'undefined' &&\n  window.navigator &&\n  window.navigator.product &&\n  window.navigator.product === 'ReactNative'\n\nexport default isReactNative\n","// @flow\nconst getSelectedValues = options => {\n  const result = []\n  if (options) {\n    for (let index = 0; index < options.length; index++) {\n      const option = options[index]\n      if (option.selected) {\n        result.push(option.value)\n      }\n    }\n  }\n  return result\n}\n\nconst getValue = (\n  event: SyntheticInputEvent<*>,\n  currentValue: any,\n  valueProp: any,\n  isReactNative: boolean\n) => {\n  if (\n    !isReactNative &&\n    event.nativeEvent &&\n    (event.nativeEvent: Object).text !== undefined\n  ) {\n    return (event.nativeEvent: Object).text\n  }\n  if (isReactNative && event.nativeEvent) {\n    return (event.nativeEvent: any).text\n  }\n  const detypedEvent: any = event\n  const {\n    target: { type, value, checked }\n  } = detypedEvent\n  switch (type) {\n    case 'checkbox':\n      if (valueProp !== undefined) {\n        // we are maintaining an array, not just a boolean\n        if (checked) {\n          // add value to current array value\n          return Array.isArray(currentValue)\n            ? currentValue.concat(valueProp)\n            : [valueProp]\n        } else {\n          // remove value from current array value\n          if (!Array.isArray(currentValue)) {\n            return currentValue\n          }\n          const index = currentValue.indexOf(valueProp)\n          if (index < 0) {\n            return currentValue\n          } else {\n            return currentValue\n              .slice(0, index)\n              .concat(currentValue.slice(index + 1))\n          }\n        }\n      } else {\n        // it's just a boolean\n        return !!checked\n      }\n    case 'select-multiple':\n      return getSelectedValues((event.target: any).options)\n    default:\n      return value\n  }\n}\n\nexport default getValue\n","// @flow\nimport * as React from 'react'\nimport { fieldSubscriptionItems } from 'final-form'\nimport type {\n  FieldSubscription,\n  FieldState,\n  FormApi,\n  FormValuesShape\n} from 'final-form'\nimport type { UseFieldConfig, FieldInputProps, FieldRenderProps } from './types'\nimport isReactNative from './isReactNative'\nimport getValue from './getValue'\nimport useForm from './useForm'\nimport useLatest from './useLatest'\nimport { useEffect, useRef } from 'react';\n\nexport function usePrevious(input: ?any) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = input;\n  });\n  return ref.current;\n}\n\nexport function compare(prevInput: ?any, currInput: ?any) {\n  const prevValue = prevInput ? JSON.stringify(prevInput) : null;\n  const currValue = currInput ? JSON.stringify(currInput) : null;\n  return prevValue !== currValue;\n}\n\n\nconst all: FieldSubscription = fieldSubscriptionItems.reduce((result, key) => {\n  result[key] = true\n  return result\n}, {})\n\nconst defaultFormat = (value: ?any, name: string) =>\n  value === undefined ? '' : value\nconst defaultParse = (value: ?any, name: string) =>\n  value === '' ? undefined : value\n\nfunction useField<FormValues: FormValuesShape>(\n  name: string,\n  {\n    afterSubmit,\n    allowNull,\n    beforeSubmit,\n    component,\n    defaultValue,\n    format = defaultFormat,\n    formatOnBlur,\n    initialValue,\n    isEqual,\n    multiple,\n    parse = defaultParse,\n    subscription = all,\n    type,\n    validate,\n    validateFields,\n    value: _value\n  }: UseFieldConfig = {}\n): FieldRenderProps {\n  const form: FormApi<FormValues> = useForm<FormValues>('useField')\n\n  const validateRef = useLatest(validate)\n\n  const beforeSubmitRef = useLatest(() => {\n    if (formatOnBlur) {\n      const formatted = format(state.value, state.name)\n      if (formatted !== state.value) {\n        state.change(formatted)\n      }\n    }\n    return beforeSubmit && beforeSubmit()\n  })\n\n  const register = (callback: FieldState => void) =>\n    form.registerField(name, callback, subscription, {\n      afterSubmit,\n      beforeSubmit: () => beforeSubmitRef.current(),\n      defaultValue,\n      getValidator: () => validateRef.current,\n      initialValue,\n      isEqual,\n      validateFields\n    })\n\n  const firstRender = React.useRef(true)\n\n  // synchronously register and unregister to query field state for our subscription on first render\n  const [state, setState] = React.useState<FieldState>((): FieldState => {\n    let initialState: FieldState = {}\n\n    // temporarily disable destroyOnUnregister\n    const destroyOnUnregister = form.destroyOnUnregister\n    form.destroyOnUnregister = false\n\n    register(state => {\n      initialState = state\n    })()\n\n    // return destroyOnUnregister to its original value\n    form.destroyOnUnregister = destroyOnUnregister\n\n    return initialState\n  })\n\n  React.useEffect(\n    () =>\n      register(state => {\n        if (firstRender.current) {\n          firstRender.current = false\n        } else {\n          setState(state)\n        }\n      }),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      name,\n      defaultValue,\n      // If we want to allow inline fat-arrow field-level validation functions, we\n      // cannot reregister field every time validate function !==.\n      // validate,\n      initialValue,\n      isEqual\n      // The validateFields array is often passed as validateFields={[]}, creating\n      // a !== new array every time. If it needs to be changed, a rerender/reregister\n      // can be forced by changing the key prop\n      // validateFields\n    ]\n  )\n\n  const prevState = usePrevious(state.value)\n  const prevValue = usePrevious(_value)\n\n  const handlers = {\n    onBlur: React.useCallback(\n      (event: ?SyntheticFocusEvent<*>) => {\n        state.blur()\n        if (formatOnBlur) {\n          /**\n           * Here we must fetch the value directly from Final Form because we cannot\n           * trust that our `state` closure has the most recent value. This is a problem\n           * if-and-only-if the library consumer has called `onChange()` immediately\n           * before calling `onBlur()`, but before the field has had a chance to receive\n           * the value update from Final Form.\n           */\n          const fieldState = form.getFieldState(state.name)\n          // this ternary is primarily to appease the Flow gods\n          // istanbul ignore next\n          state.change(\n            format(fieldState ? fieldState.value : state.value, state.name)\n          )\n        }\n      },\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      [state.name, compare(prevState, state.value), format, formatOnBlur]\n    ),\n    onChange: React.useCallback(\n      (event: SyntheticInputEvent<*> | any) => {\n        // istanbul ignore next\n        if (process.env.NODE_ENV !== 'production' && event && event.target) {\n          const targetType = event.target.type\n          const unknown =\n            ~['checkbox', 'radio', 'select-multiple'].indexOf(targetType) &&\n            !type\n\n          const value: any =\n            targetType === 'select-multiple' ? state.value : _value\n\n          if (unknown) {\n            console.error(\n              `You must pass \\`type=\"${\n                targetType === 'select-multiple' ? 'select' : targetType\n              }\"\\` prop to your Field(${name}) component.\\n` +\n                `Without it we don't know how to unpack your \\`value\\` prop - ${\n                  Array.isArray(value) ? `[${value}]` : `\"${value}\"`\n                }.`\n            )\n          }\n        }\n\n        const value: any =\n          event && event.target\n            ? getValue(event, state.value, _value, isReactNative)\n            : event\n        state.change(parse(value, name))\n      },\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      [compare(prevValue, _value) , name, parse, state.change, compare(prevState, state.value), type]\n    ),\n    onFocus: React.useCallback((event: ?SyntheticFocusEvent<*>) => {\n      state.focus()\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n  }\n\n  let { blur, change, focus, value, name: ignoreName, ...otherState } = state\n  const meta = {\n    // this is to appease the Flow gods\n    active: otherState.active,\n    data: otherState.data,\n    dirty: otherState.dirty,\n    dirtySinceLastSubmit: otherState.dirtySinceLastSubmit,\n    error: otherState.error,\n    initial: otherState.initial,\n    invalid: otherState.invalid,\n    length: otherState.length,\n    modified: otherState.modified,\n    pristine: otherState.pristine,\n    submitError: otherState.submitError,\n    submitFailed: otherState.submitFailed,\n    submitSucceeded: otherState.submitSucceeded,\n    submitting: otherState.submitting,\n    touched: otherState.touched,\n    valid: otherState.valid,\n    validating: otherState.validating,\n    visited: otherState.visited\n  }\n  if (formatOnBlur) {\n    if (component === 'input') {\n      value = defaultFormat(value, name)\n    }\n  } else {\n    value = format(value, name)\n  }\n  if (value === null && !allowNull) {\n    value = ''\n  }\n  const input: FieldInputProps = { name, value, type, ...handlers }\n  if (type === 'checkbox') {\n    if (_value === undefined) {\n      input.checked = !!value\n    } else {\n      input.checked = !!(Array.isArray(value) && ~value.indexOf(_value))\n      input.value = _value\n    }\n  } else if (type === 'radio') {\n    input.checked = value === _value\n    input.value = _value\n  } else if (component === 'select' && multiple) {\n    input.value = input.value || []\n    input.multiple = true\n  }\n\n  const renderProps: FieldRenderProps = { input, meta } // assign to force Flow check\n  return renderProps\n}\n\nexport default useField\n","// @flow\nimport * as React from 'react'\nimport type { FieldProps as Props, FieldRenderProps } from './types'\nimport renderComponent from './renderComponent'\nimport useField from './useField'\n\nconst Field = ({\n  afterSubmit,\n  allowNull,\n  beforeSubmit,\n  children,\n  component,\n  defaultValue,\n  format,\n  formatOnBlur,\n  initialValue,\n  isEqual,\n  multiple,\n  name,\n  parse,\n  subscription,\n  type,\n  validate,\n  validateFields,\n  value,\n  ...rest\n}: Props) => {\n  const field: FieldRenderProps = useField(name, {\n    afterSubmit,\n    allowNull,\n    beforeSubmit,\n    children,\n    component,\n    defaultValue,\n    format,\n    formatOnBlur,\n    initialValue,\n    isEqual,\n    multiple,\n    parse,\n    subscription,\n    type,\n    validate,\n    validateFields,\n    value\n  })\n\n  if (typeof children === 'function') {\n    return (children: Function)({ ...field, ...rest })\n  }\n\n  if (typeof component === 'string') {\n    // ignore meta, combine input with any other props\n    return React.createElement(component, { ...field.input, children, ...rest })\n  }\n  return renderComponent(\n    { ...field, children, component, ...rest },\n    `Field(${name})`\n  )\n}\n\nexport default Field\n","// @flow\nimport Form from './ReactFinalForm'\nimport FormSpy from './FormSpy'\nexport { default as Field } from './Field'\nexport { default as Form, version } from './ReactFinalForm'\nexport { default as FormSpy } from './FormSpy'\nexport { default as useField } from './useField'\nexport { default as useFormState } from './useFormState'\nexport { default as useForm } from './useForm'\nexport function withTypes() {\n  return { Form, FormSpy }\n}\n"],"names":["renderComponent","props","name","render","children","component","rest","React","undefined","Error","useWhenValueChanges","value","callback","isEqual","a","b","previous","useRef","useEffect","current","useConstant","init","ref","shallowEqual","JSON","stringify","isSyntheticEvent","candidate","stopPropagation","useLatest","versions","ffVersion","version","all","formSubscriptionItems","reduce","result","key","ReactFinalForm","debug","decorators","destroyOnUnregister","alternateFormApi","form","initialValues","initialValuesEqual","keepDirtyOnReinitialize","mutators","onSubmit","subscription","validate","validateOnBlur","config","f","createForm","pauseValidation","initialState","subscribe","state","setState","stateRef","isValidationPaused","resumeValidation","unsubscriptions","s","map","decorator","forEach","unsubscribe","console","error","setConfig","handleSubmit","event","preventDefault","submit","renderProps","reset","eventOrValues","ReactFinalFormContext","Provider","__versions","useForm","componentName","useFormState","onChange","firstRender","newState","FormSpy","reactFinalForm","isReactNative","window","navigator","product","getSelectedValues","options","index","length","option","selected","push","getValue","currentValue","valueProp","nativeEvent","text","detypedEvent","target","type","checked","Array","isArray","concat","indexOf","slice","usePrevious","input","compare","prevInput","currInput","prevValue","currValue","fieldSubscriptionItems","defaultFormat","defaultParse","useField","afterSubmit","allowNull","beforeSubmit","defaultValue","format","formatOnBlur","initialValue","multiple","parse","validateFields","_value","validateRef","beforeSubmitRef","formatted","change","register","registerField","getValidator","prevState","handlers","onBlur","blur","fieldState","getFieldState","process","targetType","unknown","onFocus","focus","ignoreName","otherState","meta","active","data","dirty","dirtySinceLastSubmit","initial","invalid","modified","pristine","submitError","submitFailed","submitSucceeded","submitting","touched","valid","validating","visited","Field","field","withTypes","Form"],"mappings":"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"}